# دليل استخدام نظام إدارة النتائج البسيط (الإصدار 2)

## 1. مقدمة

يهدف هذا الدليل إلى شرح كيفية استخدام نظام إدارة نتائج الطلاب البسيط (الإصدار 2). تم تصميم هذا النظام ليكون خفيفاً وسهل الاستخدام، مع التركيز على الوظائف الأساسية لإدارة النتائج.

## 2. الأدوار والصلاحيات

*   **المدير (Admin):** يمتلك صلاحيات كاملة على النظام، بما في ذلك إدارة المدارس، المعلمين، المواد، الطلاب، والدرجات. يمكنه أيضاً الوصول إلى وظائف المعلم.
*   **المعلم (Teacher):** يمكنه تسجيل الدخول وإدارة (إدخال وتعديل) درجات الطلاب للمواد المسندة إليه فقط.
*   **الطالب/ولي الأمر (Public User):** يمكنه البحث عن النتائج باستخدام اسم الطالب أو الرقم السري الخاص به، وعرض النتيجة وتنزيلها.

## 3. بيانات الدخول الافتراضية

*   **المدير:**
    *   اسم المستخدم: `alredfani`
    *   كلمة المرور: `73345`

*   **المعلمون:** يجب إنشاؤهم بواسطة المدير وربطهم بحساب مستخدم.

## 4. كيفية الاستخدام

### 4.1. البحث عن النتائج (للطلاب وأولياء الأمور)

1.  افتح الصفحة الرئيسية للنظام.
2.  ستجد مربع بحث.
3.  أدخل **اسم الطالب الكامل** أو **الرقم السري** الخاص به في مربع البحث.
4.  اضغط على زر "بحث".
5.  إذا تم العثور على تطابق، سيظهر اسم الطالب والمدرسة. اضغط على اسم الطالب لعرض تفاصيل النتيجة.
6.  في صفحة تفاصيل النتيجة، يمكنك رؤية درجات الطالب في المواد المختلفة.
7.  يمكنك الضغط على زر "تنزيل النتيجة (HTML)" للحصول على نسخة من النتيجة بتنسيق مناسب للطباعة أو الحفظ.

### 4.2. تسجيل الدخول (للمدير والمعلمين)

1.  من أي صفحة، اضغط على رابط "تسجيل الدخول" في الشريط العلوي.
2.  أدخل اسم المستخدم وكلمة المرور الخاصين بك.
3.  اضغط على زر "دخول".
4.  إذا كانت البيانات صحيحة، سيتم توجيهك إلى لوحة التحكم الخاصة بك (المدير أو المعلم).

### 4.3. لوحة تحكم المعلم

1.  بعد تسجيل الدخول كمعلم (أو كمدير)، اضغط على "لوحة تحكم المعلم".
2.  ستظهر قائمة بالمواد المسندة إليك (أو جميع المواد إذا كنت مديراً).
3.  اضغط على اسم المادة التي تريد إدارة درجاتها.
4.  ستظهر قائمة بأسماء الطلاب والدرجات الحالية (إن وجدت).
5.  أدخل أو عدّل الدرجات في الحقول المخصصة لكل طالب.
6.  بعد الانتهاء من إدخال/تعديل الدرجات، اضغط على زر "حفظ التغييرات" في أسفل الصفحة.

### 4.4. لوحة تحكم المدير

1.  بعد تسجيل الدخول كمدير، اضغط على "لوحة تحكم المدير".
2.  ستظهر روابط لإدارة الأقسام المختلفة (المدارس، المعلمين، المواد، الطلاب). **ملاحظة:** وظائف الإضافة والتعديل والحذف (CRUD) لهذه الأقسام لم يتم تنفيذها بالكامل في هذا الإصدار البسيط، ولكن يمكن إضافتها لاحقاً.
3.  يمكن للمدير أيضاً الوصول إلى "لوحة تحكم المعلم" لإدارة درجات أي مادة لأي طالب.

## 5. إضافة البيانات (للمدير - يتطلب تعديل الكود أو واجهة إدارة مستقبلية)

هذا الإصدار البسيط يركز على عرض وإدخال الدرجات والبحث. لإضافة مدارس، معلمين، مواد، أو طلاب جدد، يتطلب الأمر حالياً تعديل قاعدة البيانات مباشرة أو تطوير واجهات إدارة إضافية (CRUD) ضمن مسارات المدير في ملف `app.py`.

**مثال (للمطورين - كيفية إضافة بيانات يدوياً باستخدام Flask shell):**

```bash
# 1. افتح الطرفية في مجلد المشروع
cd /path/to/simple_results_app

# 2. قم بتفعيل البيئة الافتراضية
source venv/bin/activate

# 3. شغل Flask shell
flask shell

# 4. استورد النماذج وقاعدة البيانات
from app import db, School, Teacher, Subject, Student, User

# 5. أضف مدرسة جديدة
new_school = School(name="مدرسة الردفاني النموذجية")
db.session.add(new_school)
db.session.commit()

# 6. أضف مادة جديدة
new_subject = Subject(name="الرياضيات")
db.session.add(new_subject)
db.session.commit()

# 7. أضف طالباً جديداً (تأكد من وجود المدرسة أولاً)
school = School.query.first()
new_student = Student(name="علي محمد", secret_code="123456", school_id=school.id)
db.session.add(new_student)
db.session.commit()

# 8. أضف معلماً جديداً واربطه بمستخدم (أنشئ المستخدم أولاً إذا لم يكن موجوداً)
# teacher_user = User(username="teacher1", role="teacher")
# teacher_user.set_password("password123")
# db.session.add(teacher_user)
# db.session.commit()
# new_teacher = Teacher(name="أحمد صالح", school_id=school.id, user_id=teacher_user.id)
# db.session.add(new_teacher)
# db.session.commit()

# 9. اسند مادة لمعلم
# teacher = Teacher.query.first()
# subject = Subject.query.first()
# teacher.subjects.append(subject)
# db.session.commit()

# 10. للخروج
exit()
```

## 6. التشغيل المحلي (للمطورين)

1.  تأكد من تثبيت Python 3.11.
2.  افتح الطرفية في مجلد المشروع (`simple_results_app`).
3.  قم بتفعيل البيئة الافتراضية: `source venv/bin/activate` (أو `venv\Scripts\activate` على Windows).
4.  قم بتشغيل التطبيق: `python app.py`.
5.  سيتم إنشاء قاعدة البيانات تلقائياً وسيتم إنشاء حساب المدير الافتراضي.
6.  افتح المتصفح وادخل على العنوان `http://127.0.0.1:5002`.

## 7. ملاحظات

*   هذا إصدار بسيط يركز على الوظائف الأساسية.
*   وظائف الإدارة المتقدمة (إضافة/تعديل/حذف المدارس، المعلمين، المواد، الطلاب) تحتاج إلى تطوير إضافي في الواجهة.
*   تم استخدام قاعدة بيانات SQLite لتبسيط الإعداد.

